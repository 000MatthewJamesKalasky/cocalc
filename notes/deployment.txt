
TODO:

 [ ] the sage server machines needs to have outgoing network
     firewalled massively (don't know how yet)

 [ ] servedby1 will have to listen to outside world but *ONLY* for
     ports 443 and 80, so database is not exposed

Plan:

standalone high-end internet facing machines:
 * geom     -- openvpn server, stunnel, haproxy
 * combinat -- redundent vpn server (?), ?

combinat VM's:
 * salvus1  -- memcached, nginx, tornado, postgresql master
 * salvus7  -- memcached, nginx, tornado, postgresql slave
 * salvus3  -- sage server
 * salvus5  -- sage server

Servedby.net VM's:
 * servedby1 -- stunnel backup, haproxy, memcached, nginx, tornado, postgresql slave
 * servedby2 -- sage server

Redhawk VM's (I need to upgrade OS on Redhawk first...):
 * rh1 -- memcached, nginx, tornado, postgresql slave
 * rh2 -- memcached, nginx, tornado, postgresql slave
 * rh3 -- sage server
 * rh4 -- sage server


VPN:

10.37.0.1  geom
10.37.0.6  combinat
10.37.0.26 salvus0   # laptop control
10.37.0.10 salvus1
10.37.0.14 salvus3
10.37.0.18 salvus5
10.37.0.22 salvus7
10.37.0.30 servedby1
10.37.0.34 servedby2

NOTES:

stunnel --> combinat.math.washington.edu

i.e., stunnel will connect to port 443 on combinat.

combinat will connect via a *secure* openVPN tunnel to everything else.

When combinat goes down, round robbin DNS will take over and clients will
hit another server.


