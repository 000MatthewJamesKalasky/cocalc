<!doctype html>
<html>
<head>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="socket.io.js"></script>
<script type="text/javascript" src="backend.js"></script>
<script type="text/javascript">

$(function() {

    $('#execute').click(execute_code);
    $('#input, div').css({'fontSize':'small', 'fontFamily':'Courier New'});
    $('body').keydown(function(event) { 
	if (event.which == 13 && event.shiftKey) {
	    execute_code();
	    return false;
	} else if (event.which == 67 && event.ctrlKey) {
	    sigint();
	    return false;
	}
    });

    var socket = sagews_backend.socket('http://' + window.location.host);

    function execute_code() { 
	$('#output')[0].innerHTML = '';
	socket.execute('0', $('#input').val(), 
		       function(s) { $('#output')[0].innerHTML += s; },
		       function(s) { if (s) { $('#output')[0].innerHTML += '[[' + s + ']]';}  },
		       function () { $('#output')[0].innerHTML += '(done)'; }
		      );
    }
    
})
</script>


<body>

<div id="runframe">
<pre>
<textarea id="input" name="code" rows=6 cols=80>
import random, sys, time
t = time.time()
for i in range(10): 
    print i
    sys.stdout.flush()
print time.time()-t
</textarea>
</pre>
</div>

<br>
<button id="execute">Execute (shift+enter)</button>

<pre id="output">
output here
</pre>

</body>
</html>
