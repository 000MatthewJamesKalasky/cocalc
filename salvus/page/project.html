<!--
SageMathCloud: A collaborative web-based interface to Sage, Python, LaTex and the Terminal.

Copyright (C) 2014, William Stein

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->


<!-- Modal dialogs for manipulating paths -->

<div id="project-delete-path-dialog" class="modal" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h4>Delete <span class="project-delete-path-dialog-filename">filename</span>?</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="center">
                        <input type="text" style="width:80%" placeholder="Why?  (optional)" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default">Cancel</button>
                <button class="btn btn-danger btn-submit">Delete</button>
            </div>
        </div>
    </div>
</div>

<div id="project-move-path-dialog" class="modal" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h4>Move <span contenteditable="true" class="project-move-path-dialog-filename">filename</span></h4>
            </div>
            <!-- TODO: clicking on path below could give a path browser... -->
            <h5 style="margin-left:2ex">New path or filename:</h5>
            <div class="center">
                <form>
                    <input type="text" style="width:80%" name="new-filename" value="" class="form-control">
                </form>
            </div>
            <div class="center">
                <form>
                    <input type="text" style="width:80%" name="why" placeholder="Why? (optional)" class="form-control">
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default">Cancel</button>
                <button class="btn btn-warning btn-submit">Move</button>
            </div>
        </div>
    </div>
</div>


<div class="modal salvus-file-action-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3>
                    <span class="salvus-file-filename lighten"></span>
                    <span class="salvus-project-write-access  lighten pull-right" style="font-size: 11pt;color: #999;">(edit to rename)&nbsp;</span>
                </h3>
            </div>
            <div class="center" style="padding-bottom: 1em; padding-top: 1em;">

                <span class="salvus-project-public-access">
                    <a class="btn btn-lg btn-primary" href="#copy-to-another-project"><i class="fa fa-send-o"> </i> Copy To Another Project</a>
                    <a class="btn btn-lg btn-success" href="#download-file"><i class="fa fa-cloud-download"> </i> Download</a>
                </span>

                <span class="salvus-project-write-access">
                    <span class=" btn-group">
                        <a class="btn btn-warning btn-lg" href="#move-file"><i class="fa fa-arrows"> </i> Move </a>

                        <a class="btn btn-lg btn-success" href="#download-file"><i class="fa fa-cloud-download"> </i> Download</a>

                        <a class="btn btn-danger btn-lg" href="#delete-file"><i class="fa fa-trash-o"> </i> Trash</a>
                    </span>
                    <br><br>
                    <span class="salvus-project-write-access  btn-group">
                        <a class="btn btn-lg btn-primary" href="#copy-file"><i class="fa fa-copy"> </i> Copy</a>
                        <a class="btn btn-lg btn-primary" href="#copy-to-another-project"><i class="fa fa-copy"> </i> Copy To Another Project</a>
                    </span>
                    <br><br>
                    <span class="salvus-project-published-desc hide">
                        <hr>
                        <br>
                        <a class="btn btn-warning btn-lg hide" href="#unpublish-path"><i class="fa fa-shield"> </i> Stop Sharing Publicly</a>
                        <a class="btn btn-primary btn-lg hide" href="#publish-path"><i class="fa fa-share-square-o"> </i> Share Publicly</a>
                        <input type="text" placeholder="Description of share..."
                               class="salvus-project-published-desc-input form-control hide">
                        <span class="salvus-project-in-published hide">Public because it is contained in <tt class="salvus-project-in-published-path"></tt>.</span>
                        <span class="salvus-project-in-published-meaning lighten hide"><br>Share the following link: <br></span>
                        <input class="form-control salvus-project-in-published-url hide"><br>
                        <span class="lighten">(Anybody may read these files; only collaborators may change them.)</span>
                    </span>
                </span>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default btn-lg"> Close </button>
            </div>
        </div>
    </div>
</div>


<div class="modal project-invite-noncloud-users-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3><i class="fa fa-user"> </i>  Invite Collaborators via Email</h3>
            </div>
            <div class="modal-body">
                <h5  class="lighten">One or more email addresses</h5>
                <div class="center">
                    <form>
                        <input type="text" style="width:80%; background-color: #f8f8f8;" name="new-filename" value="" class="form-control">
                    </form>
                </div>
                <!--<div class="lighten" style="
margin-left: 2em;
margin-right: 2em;
">Users must have access to that given email account in order to collaborate on the project (also, invitations expire after 7 days).
</div>-->
                <h5>Message</h5>
                <div class="center">
                    <form>
                        <textarea class="form-control" style="background-color: #f8f8f8;" rows="8">            </textarea>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary btn-submit btn-lg"><i class="fa fa-thumbs-up-o"> </i> Send Invitation</button>
            </div>
        </div>
    </div>
</div>

<div class="modal project-location-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3><i class="fa fa-building"> </i> Project Locations <a href="#refresh-status"><i class="fa fa-refresh"> </i></a></h3>
            </div>
            <div class="well">

                Your project is stored on
                several computers in different datacenters.
                It runs in <b>exactly one</b> of these locations, but you can
                move it by selecting another location below.
                <br><br>
                <span class="salvus-project-location-dialog-error hide"></span>
                <span class="salvus-project-replica-replicating hide">(Project is currently being replicated)</span>
                <hr>
                <div class="salvus-project-replicas">
                    <div class="salvus-project-replica row">
                        <div class="salvus-project-replica-host col-sm-2"><b>Host</b></div>
                        <div class="lighten salvus-project-replica-timeago col-sm-2"><b>Snapshot</b></div>
                        <div class="salvus-project-replica-datacenter col-sm-3"><b>Datacenter</b></div>
                        <div class="salvus-project-replica-status col-sm-4"><b>Status</b></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default btn-lg">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal project-move-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3><i class="fa fa-building"> </i> Project Location</h3>
            </div>
            <div class="well">

                <br>
                <hr>
                <span class="lighten">Moving a project takes <b>several minutes</b>.
                    Your project is <b>not</b>
                    hosted on a networked filesystem, which would be too slow to
                    operate between datacenters; instead, there are two copies
                    of your project hosted in each datacenter as a ZFS filesystem,
                    distributed using
                    consistent hashing, and synchronized using ZFS replica streaming.
                    Moving your project
                    involves closing the project on its current host, then opening
                    a replica of it on another randomly chosen host (with newest
                    snapshot).
                </span>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default btn-lg">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal project-copy-file-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3><i class="fa fa-copy"> </i> Copy File or Directory</h3>
            </div>
            <div class="well">
                Copy<br><br>
                <input type="text" style="width:100%" class="copy-file-src form-control" value="">
                to<br><br>
                <input type="text" style="width:100%" class="copy-file-dest form-control" value="">
                <br><hr>
                <span class="lighten">
                    <b>Note:</b> The copy is done using <pre class="salvus-rsync-command">rsync -rltgoDvxH --backup --backup-dir=.trash/ source dest</pre> so
                    destination files that would be overwritten are instead copied to the trash.
                </span>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default btn-lg">Cancel</button>
                <button class="btn btn-submit btn-primary btn-lg">Copy File</button>
            </div>
        </div>
    </div>
</div>

<div class="modal salvus-project-copy-file-signin-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3><i class="fa fa-copy"> </i> Copy File or Directory</h3>
            </div>
            <div class="well">
                <span class="salvus-signed-in-already hide">
                    <a href="#create-project">Create a project</a> so you can copy files to it.
                </span>
                <span class="salvus-not-signed-in-already hide">
                    <a href="#create-account">Create a free account</a> or <a href="#sign-in">sign in</a> so you can copy files to your own project.
                </span>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default btn-lg">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal salvus-project-copy-to-another-project-dialog"  data-backdrop="static"  tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3 class="salvus-project-copy-file hide"><i class="fa fa-copy"> </i> Copy File to Another Project</h3>
                <h3 class="salvus-project-copy-dir hide"><i class="fa fa-copy"> </i> Copy Directory to Another Project</h3>
            </div>
            <div class="well">
                Copy<br>
                <input type="text" style="width:100%" class="salvus-project-copy-src-path form-control" value="">
                to<br>
                <input type="text" style="width:100%" class="salvus-project-copy-target-path form-control" value="">
                <br>
                in the project<br>
                <select class="salvus-project-target-project-id form-control">
                </select>

                <br>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" class="salvus-project-overwrite-newer">
                        Overwrite newer versions of files
                    </label>
                </div>
                <div class="checkbox">
                    <label class="salvus-project-copy-dir hide">
                        <input type="checkbox" class="salvus-project-delete-missing">
                        Delete extra files in target directory
                    </label>
                </div>
                <hr>
            </div>
            <div class="modal-footer">
                <button class="btn btn-lg btn-close">Cancel</button>
                <button class="btn btn-lg btn-submit btn-primary">Copy File</button>
            </div>
        </div>
    </div>
</div>

<div class="modal project-move-file-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn-close" aria-hidden="true">
                    <span style="font-size:20pt;">×</span>
                </button>
                <h3><i class="fa fa-arrows"> </i> Move File or Directory</h3>
            </div>
            <div class="well">
                Move<br><br>
                <input type="text" style="width:100%" class="move-file-src form-control" value="">
                to (give a directory or new name)<br><br>
                <input type="text" style="width:100%" class="move-file-dest form-control" value="">
                <br><hr>
            </div>
            <div class="modal-footer">
                <button class="btn btn-close btn-default btn-lg">Cancel</button>
                <button class="btn btn-submit btn-primary btn-lg">Move File</button>
            </div>
        </div>
    </div>
</div>


<!-- The actual project file browser, etc., interface -->

<div id="salvus-project-templates" class="hide">

    <div class="container-fluid salvus-project hide">
        <div class="row" style="margin-bottom:-15px">   <!-- TODO: width 100% probably hack around misues of Bootstrap -- without get horiz scrollbar; also margin-bottom:-15px another horrible hack. -->
            <!-- Displays the current path -->
            <div class="salvus-project-write-access">
                <div class="hidden-xs project-file-top-current-path-container">
                    <a href="#project-file-listing"><span class="project-file-top-current-path-display"></span></a>
                </div>
            </div>
            <!--<a class="pull-right salvus-project-status-indicator-button pill">
<i class="project-control-icon fa fa-wrench"> </i>
<span class="salvus-project-status-indicator"></span>
</a>-->

            <!-- Tabs: place where you click on them -->
            <ul class="nav nav-pills  project-pages">
                <!-- Settings specific to this project -->
                <!-- Browse through files in the project -->
                <!-- Project settings -->


                <!-- we use data-target instead of href=# to avoid the highly annoying link text that appears on hover at the bottom of the screen! -->
                <li class="super-menu project-pages-button">
                    <a data-target="project-file-listing" data-toggle="tooltip" data-placement="bottom" title="Browse files">
                        <i class="project-control-icon fa fa-folder-open-o"></i>
                        <span class="project-pages-button-label hidden-xs">Files</span>
                    </a>
                </li>

                <!-- File editor with links to recent files -->
                <li class="super-menu project-pages-button hide">
                    <a data-target="project-editor" data-toggle="tooltip" data-placement="bottom" title="Recent files">
                        <i class="project-control-icon fa fa-clock-o"></i>
                        <span class="project-pages-button-label hidden-xs">Recent</span>
                    </a>
                </li>

                <!-- Create a new file (or, etc.)-->
                <li class="super-menu project-pages-button salvus-project-write-access">
                    <a data-target="project-new-file" data-toggle="tooltip" data-placement="bottom" title="Create new file, folder, worksheet or terminal">
                        <i class="project-control-icon fa fa-plus-circle"></i>
                        <span class="project-pages-button-label hidden-xs">New</span>
                    </a>
                </li>


                <!-- Project activities  -->
                <li class="super-menu project-pages-button salvus-project-write-access">
                    <a data-target="project-activity" data-toggle="tooltip" data-placement="bottom" title="Log of project activity">
                        <i class="project-control-icon fa fa-history"></i>
                        <span class="project-pages-button-label hidden-xs">Log</span>
                    </a>
                </li>

                <!-- Search -->
                <li class="super-menu project-pages-button project-search-menu-item salvus-project-write-access">
                    <a data-target="project-search" data-toggle="tooltip" data-placement="bottom" title="Search files in the project">
                        <i class="project-control-icon fa fa-search"></i>
                        <span class="project-pages-button-label hidden-xs">Find</span>
                    </a>
                </li>

                <li class="super-menu project-pages-button  project-settings-menu-item salvus-project-write-access">
                    <a data-target="project-settings" data-toggle="tooltip" data-placement="bottom" title="Project settings and controls">
                        <i class="project-control-icon fa fa-wrench"></i>
                        <span class="project-pages-button-label hidden-xs">Settings</span>
                    </a>
                </li>

            </ul>
            <ul class="nav nav-pills file-pages">
            </ul>

            <!-- The actual screens that get revealed by each tab: -->

            <!-- Open files in this project. -->
            <div class="project-editor hide">
                <!--<h1  class="hidden-xs project-editor-recent-files-header" style="margin-left:1em;">
Recent Files (<span class="project-editor-file-count">0</span>)
</h1>
-->

                <!-- the actual recent file UI gets inserted here dynamically! -->

            </div>
            <!-- Files -->
            <div class="project-file-listing col-sm-12 hide">
                <div class="smc-react-project-files"></div>
            </div>

            <!-- Create a new file -->
            <div class="project-new-file col-sm-12 hide">
                <div class="smc-react-project-new"></div>
            </div>

            <!-- Page to see project activity log -->
            <div class="project-activity hide col-sm-12">  <!-- hidden by default -->
                <div class="smc-react-project-log" style="margin-top:20px">
                    React project log will go here
                </div>
            </div>

            <!-- Page to configure the settings for this project -->
            <div class="project-settings hide col-sm-12">  <!-- hidden by default -->
                <div class="smc-react-project-settings"></div>
            </div>

            <!-- Search -->
            <div class="project-search col-sm-12 hide">
                <div class="smc-react-project-search"></div>
            </div>

        </div>
    </div>

    <i class="project-home-icon fa fa-home"> </i>

    <span class="project-segment-sep lighten">
        &nbsp; / &nbsp;
    </span>

    <a class="project-file-listing-path-segment-link"></a>

    <div class="project-search-result">
        <b><a style="cursor:pointer"></a></b>
        <span></span>
    </div>

    <div class="project-collab project-connection">
        <div style="white-space: nowrap;">
            <span class="project-collab-first-name"></span>
            <span class="project-collab-last-name"></span>
            (<span class="project-collab-mode"></span>)
            <i class="project-close-button lighten fa fa-times pull-right" style="font-size:24px"> </i>
        </div>
    </div>

    <div class="project-linked project-connection">
        <div style="white-space: nowrap;">
            <a style="color:white;cursor:pointer">
                <span class="project-linked-title"></span>
                <span class="project-linked-description"></span>
            </a>
            <i class="project-close-button lighten fa fa-times pull-right" style="font-size:24px"> </i>
        </div>
    </div>


</div>

<div class="hide project-activity-templates">

    <div class="project-activity-entry row">
        <div class="lighten col-sm-3">
            <span class="project-activity-name lighten"></span>
            (<span class="project-activity-date lighten small"></span>)
        </div>
        <div class="project-activity-value col-sm-9">
        </div>
    </div>

    <span class="project-activity-chat">
        <i class="fa fa-comment" style="padding-right:2em"> </i>
        <span class="project-activity-chat-mesg"></span>
    </span>

    <span class="project-activity-open_project">
        <i class="fa fa-tasks" style="padding-right:2em"> </i>
        Opened this project.
    </span>

    <span class="project-activity-other">
        <i class="fa fa-circle-blank" style="padding-right:2em"> </i>
        <span class="project-activity-value"></span>
    </span>

    <span class="project-activity-open">
        <i class="fa fa-folder-open-o" style="padding-right:2em"> </i>
        Opened
        <span class="project-activity-open-type"></span>
        <a class="project-activity-open-filename"></a>
    </span>

</div>



