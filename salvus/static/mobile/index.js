// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var backend, execute_code;
    execute_code = function() {
      $("#output").val("");
      $("#time").html("");
      $("#run_status").html("running");
      return backend.execute($("#input").val(), function(mesg) {
        var o;
        o = $("#output");
        o.val(o.val() + mesg.output.stdout);
        if (mesg.output.stderr) {
          o.val(o.val() + "\n!!!!!!!!!!!!!!\n" + mesg.output.stderr + "\n!!!!!!!!!!!!!\n");
        }
        return $("#run_status").html((mesg.output.done ? "" : "running..."));
      });
    };
    $("#execute").click(function(e) {
      return execute_code();
    });
    $("#connection_status").html("connecting...");
    return backend = salvus.Backend({
      onopen: function(protocol) {
        return $("#connection_status").html("connected (" + protocol + ")");
      },
      onclose: function() {
        return $("#connection_status").html("reconnecting...");
      }
    });
  });

}).call(this);
