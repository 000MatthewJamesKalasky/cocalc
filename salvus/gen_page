#!/usr/bin/env python

import os
path = os.path.split(os.path.realpath(__file__))[0]

os.chdir(path)

##################################
# generate static/index.html

out = open("static/index.html","w")
out.write("<!-- THIS FILE IS AUTOGENERATED BY gen_page !!! Edit the files in static/page instead. -->\n\n")
for X in open("page/index.html").readlines():
    if ".html" in X:
       out.write(open(os.path.join("page/", X.strip())).read())
    else:
       out.write(X)

####################################################
# generate static/index.js and static/index.min.js

out = open("static/index.js","w")
out.write("/* THIS FILE IS AUTOGENERATED BY gen_page !!! Edit the files in static/page instead. */\n\n")
for X in open("page/index.js").readlines():
    if ".coffee" in X:
        out.write(open(os.path.join("page/temp/", X.strip().replace('.coffee','.js'))).read())
    else:
        out.write(X)

# TODO: generate min


####################################################
# generate static/index.css

out = open("static/index.css","w")
out.write("/* THIS FILE IS AUTOGENERATED BY gen_page !!! Edit the files in static/page instead. */\n\n")
for X in open("page/index.css").readlines():
    if ".css" in X:
        out.write(open(os.path.join("page/", X.strip())).read())
    else:
        out.write(X)

